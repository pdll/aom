"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8182],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return c}});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=r.createContext({}),d=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=d(e.components);return r.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=d(t),c=i,k=m["".concat(l,".").concat(c)]||m[c]||u[c]||a;return t?r.createElement(k,o(o({ref:n},p),{},{components:t})):r.createElement(k,o({ref:n},p))}));function c(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var d=2;d<a;d++)o[d]=t[d];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},4705:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return p},default:function(){return m}});var r=t(7462),i=t(3366),a=(t(7294),t(3905)),o=["components"],s={title:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432",sidebar_position:3},l=void 0,d={unversionedId:"api/koa/middlewares",id:"api/koa/middlewares",isDocsHomePage:!1,title:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432",description:"\u041c\u043e\u0441\u0442\u044b (Bridge) \u0438 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0438 (Middleware)",source:"@site/i18n/ru/docusaurus-plugin-content-docs/current/api/koa/middlewares.md",sourceDirName:"api/koa",slug:"/api/koa/middlewares",permalink:"/ru/docs/api/koa/middlewares",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432",sidebar_position:3},sidebar:"api",previous:{title:"\u041a\u043e\u043d\u0435\u0447\u043d\u044b\u0435 \u0442\u043e\u0447\u043a\u0438",permalink:"/ru/docs/api/koa/endpoints"},next:{title:"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u044b \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432",permalink:"/ru/docs/api/koa/parameters"}},p=[{value:"\u041c\u043e\u0441\u0442\u044b (Bridge) \u0438 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0438 (Middleware)",id:"\u043c\u043e\u0441\u0442\u044b-bridge-\u0438-\u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0438-middleware",children:[]},{value:"Marker",id:"marker",children:[]},{value:"Sticker",id:"sticker",children:[]},{value:"\u0426\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438",id:"\u0446\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435-\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438",children:[]}],u={toc:p};function m(e){var n=e.components,t=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"\u043c\u043e\u0441\u0442\u044b-bridge-\u0438-\u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0438-middleware"},"\u041c\u043e\u0441\u0442\u044b (Bridge) \u0438 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0438 (Middleware)"),(0,a.kt)("p",null,"\u041f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0438 \u0441\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0430 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Middleware()"),". \u041e\u043d \u043d\u0435 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u0438 \u043f\u0440\u043e\u0441\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442\n\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 \u043a\u0430\u043a \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043e\u0447\u043d\u044b\u0439 \u0441\u043b\u043e\u0439 \u043a \u043b\u044e\u0431\u043e\u043c\u0443 \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0443 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u043e\u0433\u043e \u0443\u0437\u043b\u0430:\n\u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u043e\u0439, \u043c\u043e\u0441\u0442\u043e\u043c, \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u043e\u0439 \u0438\u043b\u0438 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u044b\u043c \u0443\u0437\u043b\u043e\u043c \u0446\u0435\u043b\u0438\u043a\u043e\u043c."),(0,a.kt)("p",null,"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 ",(0,a.kt)("inlineCode",{parentName:"p"},"middleware")," \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0430 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Use()"),", \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u044e\u0449\u0435\u0433\u043e \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432\n\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c ",(0,a.kt)("inlineCode",{parentName:"p"},"middleware"),"-\u0444\u0443\u043d\u043a\u0446\u0438\u0439: ",(0,a.kt)("inlineCode",{parentName:"p"},"@Use(Root.Init, Auth.Required, Users.Init)"),".\n\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Use()")," \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d \u043a endpoint-\u0443, \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u043e\u043c\u0443 \u0443\u0437\u043b\u0443 \u0446\u0435\u043b\u0438\u043a\u043e\u043c, \u0434\u0440\u0443\u0433\u043e\u0439 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0435 \u0438\u043b\u0438 \u043c\u043e\u0441\u0442\u0443.\n\u0412\u0441\u0435 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0434 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u043c, \u043a \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u043e\u043d\u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b."),(0,a.kt)("p",null,"\u0414\u043b\u044f \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u044b\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u0431\u043e\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043c\u043e\u0441\u0442\u044b, \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0435 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u043e\u043c ",(0,a.kt)("inlineCode",{parentName:"p"},"@Bridge"),".\n\u0410\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u043c\u0438 \u043a \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0443 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"prefix: string")," - \u0430\u0434\u0440\u0435\u0441\u043d\u044b\u0439 \u043f\u0440\u0435\u0444\u0438\u043a\u0441 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430, \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440, \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0439 \u0446\u0435\u043b\u0435\u0432\u043e\u043c\u0443 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u043e\u043c\u0443\n\u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0443"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"nextRoute: Function")," - \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u044b\u0439 \u0443\u0437\u0435\u043b: \u0437\u0430\u0434\u0435\u043a\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435\n\u043c\u043e\u0441\u0442\u044b, \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0438 \u0438 ",(0,a.kt)("inlineCode",{parentName:"li"},"endpoint"),"-\u044b")),(0,a.kt)("p",null,"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Bridge")," \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c\u0441\u044f \u043a\u0430\u043a \u043a \u043a\u043b\u0430\u0441\u0441\u0443, \u0442\u0430\u043a \u0438 \u043a \u043c\u0435\u0442\u043e\u0434\u0443 \u043a\u043b\u0430\u0441\u0441\u0430. \u0412 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u0435\u0442\u043e\u0434 \u043a\u043b\u0430\u0441\u0441\u0430\n\u0432\u044b\u0441\u0442\u0443\u043f\u0430\u0435\u0442 \u043a\u0430\u043a \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0430 \u043a \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u043e\u043c\u0443 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0443."),(0,a.kt)("p",null,"\u041f\u0440\u0438\u043c\u0435\u0440:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'// ... index.ts\nimport { Get, Bridge, Use, Middleware } from "aom";\nimport logger from "logger";\nimport Files from "./files";\n\n@Bridge("/files", Files) // \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u044b\u0439 \u0443\u0437\u0435\u043b Files \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043f\u043e \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0443 `/files` \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0443\u0437\u043b\u0430\nclass Index {\n  @Get()\n  @Use(Root.Logger) // \u043f\u0435\u0440\u0435\u0434 \u043c\u0435\u0442\u043e\u0434\u043e\u043c `GET /` \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0430 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0430 \u0441 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c\n  static Hello() {\n    return `Hello, I\'m aom`;\n  }\n\n  @Middleware()\n  static Logger(@Ctx() ctx, @Next() next) {\n    logger.debug(ctx);\n    return next();\n  }\n}\n\n// Files.ts\nimport fs from "fs";\nimport path from "path";\nimport { Get, Bridge, Params, StateMap, Next, Err } from "aom";\nimport FileInfo from "./fileinfo";\n\nclass Files {\n  @Get()\n  static Index() {\n    return fs.readdirSync(__dirname);\n  }\n\n  @Bridge("/:filename", FileInfo) // \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 - \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430 - \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0444\u0440\u0430\u0433\u043c\u0435\u043d\u0442\u0430 \u043f\u0443\u0442\u0438\n  static prepare(\n    @Params("filename") filename: string,\n    @StateMap() stateMap: WeakMap<any, any>,\n    @Err() err,\n    @Next() next\n  ) {\n    // \u043f\u043e\u043b\u0443\u0447\u0438\u043c \u043f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430 \u0441 \u0443\u0447\u0435\u0442\u043e\u043c \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438\n    filename = path.join(__dirname, filename);\n    // \u0435\u0441\u043b\u0438 \u0444\u0430\u0439\u043b \u043d\u0430\u0439\u0434\u0435\u043d\n    if (fs.existsSync(filename)) {\n      // \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u043e\u0433\u043e \u0443\u0437\u043b\u0430\n      const fileInfo = new FileInfo();\n      // \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0432 \u043d\u0435\u0433\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u043e\u0435 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430\n      fileInfo.filename = filename;\n      // \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0432 stateMap (\u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 WeakMap)\n      stateMap.set(FileInfo, fileInfo);\n      return next();\n    } else {\n      return err("file not found", 404, [filename]);\n    }\n  }\n}\n\n// ... fileinfo.ts\nimport getFileInfo from "get-file-info";\nimport fs from "fs";\n\n@Use(FileInfo.Init) // \u043f\u0435\u0440\u0435\u0434 \u0432\u0441\u0435\u043c\u0438 \u043c\u0435\u0442\u043e\u0434\u0430\u043c\u0438 \u0443\u0437\u043b\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0430 `FileInfo.Init`\nclass FileInfo {\n  filename: string; // \u043f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430\n  info: any; // \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0444\u0430\u0439\u043b\u0435\n\n  @Get()\n  static Index(@Ctx() ctx, @This() _this: FileInfo) {\n    // \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u0442\u0438\u043f \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u043e\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e mime-type \u0444\u0430\u0439\u043b\u0430\n    ctx.set("Content-Type", _this.info.type);\n    return fs.readFileSync(_this.filename);\n  }\n\n  @Delete()\n  static Delete(@This() { filename }: FileInfo) {\n    fs.unlinkSync(filename);\n    return `file ${filename} successfully removed`;\n  }\n\n  @Middleware()\n  static Init(@This() _this: FileInfo, @Next() next) {\n    // \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0437\u0430\u0432\u0435\u0434\u043e\u043c\u043e \u0442\u043e\u0447\u043d\u043e \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u0447\u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442\n    // \u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043e \u043d\u0435\u043c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0431\u0435\u0437 \u043f\u0440\u043e\u0432\u0435\u0440\u043e\u043a \u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0438\n    _this.info = getFileInfo(_this.filename);\n    return next();\n  }\n}\n')),(0,a.kt)("p",null,"\u041c\u043e\u0441\u0442 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c ",(0,a.kt)("inlineCode",{parentName:"p"},"/"),": \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0432\u0441\u0435 \u043c\u0435\u0442\u043e\u0434\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u043e\u0433\u043e \u0443\u0437\u043b\u0430 \u0431\u0443\u0434\u0443\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f\n\u0432 \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u043c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0435 \u0443\u0437\u043b\u0430, \u043a \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u0412\u0430\u0436\u043d\u043e"),": \u043f\u0440\u0438 \u0441\u0431\u043e\u0440\u043a\u0435 \u0432\u0441\u0435 \u043c\u043e\u0441\u0442\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u044e\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 ",(0,a.kt)("inlineCode",{parentName:"p"},"endpoint"),"-\u043e\u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0443\u0437\u043b\u0430. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0435\u0441\u043b\u0438 \u0432\u0434\u0440\u0443\u0433\n\u0432\u043e\u0437\u043d\u0438\u043a\u043d\u0435\u0442 \u043a\u043e\u043b\u043b\u0438\u0437\u0438\u044f \u0432 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u0445 ",(0,a.kt)("inlineCode",{parentName:"p"},"url")," \u0438/\u0438\u043b\u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"prefix"),", \u0442\u043e \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 \u043e\u0441\u0442\u0430\u043d\u0435\u0442\u0441\u044f \u0437\u0430 \u043c\u0435\u0442\u043e\u0434\u0430\u043c\u0438, \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u043c\u0438\n\u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u043c\u0438, \u0442\u043e \u0435\u0441\u0442\u044c \u0447\u0435\u0440\u0435\u0437 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Bridge"),". \u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u043e\u0431\u044f\u0437\u0430\u043d \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0441\u043b\u0435\u0434\u0438\u0442\u044c \u0437\u0430 \u0430\u0434\u0440\u0435\u0441\u043d\u044b\u043c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e\u043c,\n\u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u043d \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442."),(0,a.kt)("h2",{id:"marker"},"Marker"),(0,a.kt)("p",null,"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Marker()")," \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043e\u0431\u043e\u0433\u0430\u0442\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0442\u043e\u0447\u043a\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u0435, \u0443\u043a\u0430\u0437\u0430\u0432,\n\u0447\u0442\u043e \u0434\u043b\u044f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 ",(0,a.kt)("inlineCode",{parentName:"p"},"route")," \u0432 \u0446\u0435\u043f\u043e\u0447\u043a\u0435 \u043f\u0440\u0435\u0434\u0448\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u0435\u043c\u0443 ",(0,a.kt)("inlineCode",{parentName:"p"},"middleware")," \u0435\u0441\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b ",(0,a.kt)("inlineCode",{parentName:"p"},"cursor")," \u0441 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c\u0438\n\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c\u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"prefix"),", \u043a \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043e\u0441\u043e\u0431\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430."),(0,a.kt)("p",null,"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043d\u0430 ",(0,a.kt)("inlineCode",{parentName:"p"},"middleware"),"-\u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u0442\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0447\u0442\u043e \u0432 \u043c\u043e\u043c\u0435\u043d\u0442, \u043a\u043e\u0433\u0434\u0430 \u044d\u0442\u0430 ",(0,a.kt)("inlineCode",{parentName:"p"},"middleware"),"\n\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0438\u0437 \u0443\u0447\u0430\u0441\u0442\u043a\u043e\u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u044b, \u043c\u0430\u0440\u043a\u0435\u0440 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c\n\u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438."),(0,a.kt)("p",null,"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Marker()")," \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0434\u0432\u0430 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430:\n",(0,a.kt)("inlineCode",{parentName:"p"},"route")," \u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"cursor"),". \u041a\u0443\u0440\u0441\u043e\u0440\u043e\u043c \u0431\u0443\u0434\u0435\u0442 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0430, \u043a \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Marker")),(0,a.kt)("p",null,"\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0441\u0431\u043e\u0440\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u044b \u0438 \u043d\u0435 \u043e\u043f\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043e\u043c. \u041d\u0430\u043b\u0438\u0447\u0438\u0435 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438\n\u0432 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u043c\u043e\u0436\u0435\u0442 \u0441\u043b\u0443\u0436\u0438\u0442\u044c \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0434\u043b\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0445 \u043f\u0440\u043e\u0432\u0435\u0440\u043e\u043a: \u043f\u043e\u043b\u043d\u043e\u043c\u043e\u0447\u0438\u0439,\n\u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0438 \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u043e\u0441\u0442\u0430\u0432\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439."),(0,a.kt)("p",null,"\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u044b\u043c \u0442\u043e\u0447\u043a\u0430\u043c."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'// \u0434\u043b\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043c\u043e\u0434\u0435\u043b\u044c \u0434\u0430\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0442\u043e\u0447\u0435\u0447\u043d\u043e\u0435 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435\n// \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0445 \u0438 \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043e\u0447\u043d\u044b\u0445 \u0443\u0447\u0430\u0441\u0442\u043a\u043e\u0432 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u0440\u043e\u043b\u0435\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u043d\u043e\u043c\u043e\u0447\u0438\u044f \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u044b\n// \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u043c\u043e\u0433\u0443\u0442 \u0438\u043c\u0435\u0442\u044c \u043e\u0434\u043d\u0443 \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0440\u043e\u043b\u0435\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0435\u043c\u0443 \u043e\u0431\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f \u043a \u0440\u0430\u0437\u043d\u044b\u043c \u043c\u0435\u0442\u043e\u0434\u0430\u043c\nclass Access {\n  // \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0430, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0449\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443, \u0447\u0442\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e, \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e\u043c\u0443 \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435, \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\n  // \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0443\u0447\u0430\u0441\u0442\u043a\u0443 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430\n  @Middleware()\n  // \u0443\u043a\u0430\u0436\u0435\u043c, \u0447\u0442\u043e \u0434\u0430\u043d\u043d\u0430\u044f \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0430 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043c\u0430\u0440\u043a\u0435\u0440\u043e\u043c, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0449\u0438\u043c \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438\n  @Marker(Access.setMark)\n  static Check(\n    @StateMap(Auth) { user }: Auth, // \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n    @Route() route, // \u0442\u043e\u0447\u043a\u0430 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0432\u0430\u0436\u043d\u043e \u0437\u043d\u0430\u0442\u044c `path` \u0438 `method`\n    @Cursor() cursor, // \u043a\u0443\u0440\u0441\u043e\u0440, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0432\u0430\u0436\u043d\u043e \u0437\u043d\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 `prefix`\n    @Next() next,\n    @Err() err\n  ) {\n    // \u0435\u0441\u043b\u0438 \u0434\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430, \u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u043c \u043f\u0440\u043e\u0439\u0442\u0438 \u0434\u0430\u043d\u043d\u0443\u044e \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0443, \u0432\u0435\u0434\u0443\u0449\u0443\u044e \u043a \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u0430\u0434\u0440\u0435\u0441\u0443\n    if (user.checkAccess(route, cursor)) {\n      return next();\n    } else {\n      // \u0438\u043d\u0430\u0447\u0435 \u0432\u0435\u0440\u043d\u0435\u043c \u043e\u0448\u0438\u0431\u043a\u0443 403\n      return err("access denied", 403);\n    }\n  }\n\n  // \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0438\u043c\u044f \u043c\u0430\u0440\u043a\u0435\u0440\u0430\n  static markerName = "check_access";\n  // \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438\n  static setMark(route: IRoute, cursor: ICursor) {\n    const { markerName } = this;\n    // \u0435\u0441\u043b\u0438 \u0434\u043b\u044f \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 `route` \u043d\u0435\u0442 \u0442\u0440\u0435\u0431\u0443\u0435\u043c\u043e\u0433\u043e \u043c\u0430\u0440\u043a\u0435\u0440\u0430, \u0442\u043e \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0435\u0433\u043e\n    if (!route[markerName]) {\n      route[markerName] = [];\n    }\n    // \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043a\u0443\u0440\u0441\u043e\u0440 \u0432 \u043c\u0430\u0440\u043a\u0435\u0440\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u043b\u044f route\n    route[markerName].push(cursor);\n  }\n}\n// ... \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u0430\u0440\u043a\u0435\u0440\n// \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 \u0438\u0437 \u0441\u043e\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u044b, \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u0439 \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\nimport { $aom } from "./server";\n\n@Bridge("/users", Users)\nclass Root {\n  @Get()\n  static Index() {\n    return $aom.routes;\n  }\n\n  @Get("/info")\n  // \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c middleware, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0449\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438\n  // \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u043d\u0430 \u043c\u0435\u0442\u043e\u0434 `Root.Secure`\n  @Use(Access.Check)\n  static Secure() {\n    return "this route is secure";\n  }\n}\n\n// \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c middleware, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0449\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438\n// \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u043d\u0430 \u0432\u0441\u0435 \u043c\u0435\u0442\u043e\u0434\u044b \u0443\u0437\u043b\u0430 Users\n@Use(Access.Check)\nclass Users {\n  @Get()\n  static Index() {\n    return models.Users.find();\n  }\n\n  @Post("/add")\n  static Add(@Body() body) {\n    return models.Users.create({ ...body });\n  }\n\n  @Delete("/:user_id")\n  @Use(Access.Check)\n  static Delete(@Params() { user_id }) {\n    return models.Users.remove({ _id: user_id });\n  }\n}\n')),(0,a.kt)("p",null,"\u0412 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 \u0434\u0430\u043d\u043d\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043e\u0432 ",(0,a.kt)("inlineCode",{parentName:"p"},"routes")," \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'[\n  {\n    method: "get",\n    path: "/",\n  },\n  {\n    method: "get",\n    path: "/secure",\n    check_access: [{ prefix: "/secure" }],\n  },\n  {\n    method: "get",\n    path: "/users",\n    check_access: [{ prefix: "/users" }],\n  },\n  {\n    method: "delete",\n    path: "/users/:user_id",\n    check_access: [{ prefix: "/users" }, { prefix: "/users/:user_id" }],\n  },\n  {\n    method: "post",\n    path: "/users/add",\n    check_access: [{ prefix: "/users" }],\n  },\n];\n')),(0,a.kt)("p",null,"\u041d\u0430\u043b\u0438\u0447\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f ",(0,a.kt)("inlineCode",{parentName:"p"},"check_access"),' \u0434\u043b\u044f \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0445 \u0442\u043e\u0447\u0435\u043a \u0431\u0443\u0434\u0435\u0442 \u044f\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u0440\u0438\u0437\u043d\u0430\u043a\u043e\u043c \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u044d\u0442\u0438 \u0442\u043e\u0447\u043a\u0438\n\u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 "\u043f\u043e\u0434\u043d\u044f\u043b\u0430 \u043d\u0430\u0432\u0435\u0440\u0445" \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u0443\u044e\n\u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u0432\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0442\u0435\u0445 \u0438\u0437 \u043d\u0438\u0445, \u043a \u043a\u043e\u0442\u043e\u0440\u044b\u043c\n\u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u044b\u0435 \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u044b.'),(0,a.kt)("h2",{id:"sticker"},"Sticker"),(0,a.kt)("p",null,"\u0414\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Sticker()")," \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f\u0445, \u043a\u043e\u0433\u0434\u0430 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u044b\u0445 \u0443\u0437\u043b\u043e\u0432 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u0442\u0438\u043f\u043e\u0432\u044b\u0435\n\u043a\u043b\u0430\u0441\u0441\u044b, \u043e\u0442 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0430\u0441\u043b\u0435\u0434\u0443\u044e\u0442\u0441\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u044b\u0435 \u0443\u0437\u043b\u044b."),(0,a.kt)("p",null,"\u041f\u0440\u0438\u043c\u0435\u0440:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"// \u0434\u043b\u044f \u0431\u044b\u0441\u0442\u0440\u043e\u0433\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0430\u043f\u0438 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u0432\u043e\u043a\u0440\u0443\u0433 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430 \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043a\u043b\u0430\u0441\u0441\n// \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0435 middleware \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430 \u0434\u0430\u043d\u043d\u044b\u0445\n// \u043a\u0430\u043a\u0438\u043c-\u0442\u043e \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u044e\u0449\u0438\u0445 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\nclass Catalogs {\n  model: Model;\n  where = {};\n  body = {};\n\n  @Middleware()\n  static SafeQuery(@Query() query, @This() _this, @Next() next) {\n    _this.where = this.FilterQuery(_this.model, query);\n    return next();\n  }\n\n  @Middleware()\n  static SafeBody(@Body() body, @This() _this, @Next() next) {\n    _this.body = this.FilterBody(_this.model, body);\n    return next();\n  }\n\n  // \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0448\u043b\u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0443\u044e \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u0432 \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\n  static FilterQuery(model, query) {\n    return model.safeQuery(query);\n  }\n\n  // \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0448\u043b\u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0443\u044e \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u0432 \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\n  static FilterBody(model, body) {\n    return model.safeBody(body);\n  }\n}\n\n// \u0443\u043d\u0430\u0441\u043b\u0435\u0434\u0443\u0435\u043c \u043e\u0442 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u044b\u0439 \u0443\u0437\u0435\u043b \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f\u043c\u0438\nclass Categories extends Catalogs {\n  model = models.Categories;\n\n  @Get()\n  // \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c \u0442\u0438\u043f\u043e\u0432\u0443\u044e \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u0435\u0432 \u043f\u043e\u0438\u0441\u043a\u0430 \u0432 \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\n  @Use(Categories.SafeQuery)\n  static Index(@This() _this) {\n    return _this.model.find(_this.where);\n  }\n\n  @Post()\n  // \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c \u0442\u0438\u043f\u043e\u0432\u0443\u044e \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439\n  @Use(Categories.SafeBody)\n  static Add(@This() _this) {\n    return _this.model.create(_this.body);\n  }\n}\n\n// \u0443\u043d\u0430\u0441\u043b\u0435\u0434\u0443\u0435\u043c \u043e\u0442 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u043d\u044b\u0439 \u0443\u0437\u0435\u043b \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0431\u0440\u0435\u043d\u0434\u0430\u043c\u0438\nclass Brands extends Catalogs {\n  model = models.Brands;\n\n  @Get()\n  // \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c \u0442\u0438\u043f\u043e\u0432\u0443\u044e \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u0435\u0432 \u043f\u043e\u0438\u0441\u043a\u0430 \u0432 \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\n  @Use(Brands.SafeQuery)\n  static Index(@This() _this) {\n    return _this.model.find(_this.where);\n  }\n\n  @Post()\n  // \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c \u0442\u0438\u043f\u043e\u0432\u0443\u044e \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439\n  @Use(Brands.SafeBody)\n  static Add(@This() _this) {\n    return _this.model.create(_this.body);\n  }\n}\n")),(0,a.kt)("p",null,"\u041d\u0435\u0441\u043c\u043e\u0442\u0440\u044f \u043d\u0430 \u0442\u043e, \u0447\u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u0434 \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043a\u043e\u043c\u043f\u043b\u0438\u0440\u0443\u0435\u043c\u044b\u0445 \u043e\u0448\u0438\u0431\u043e\u043a, \u043e\u043d \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c.\n\u0412\u0432\u0438\u0434\u0443 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u0430 \u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u0432 JS, \u0444\u0443\u043d\u043a\u0446\u0438\u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"Brands.SafeBody")," \u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"Brands.SafeQuery"),"\n(\u0440\u0430\u0432\u043d\u043e \u043a\u0430\u043a ",(0,a.kt)("inlineCode",{parentName:"p"},"Categories.SafeBody")," \u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"Categories.SafeQuery"),") \u0431\u0443\u0434\u0443\u0442 \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u0434\u0435\u0441\u043a\u0440\u0438\u043f\u0442\u043e\u0440 \u0444\u0443\u043d\u043a\u0446\u0438\u0439\n",(0,a.kt)("inlineCode",{parentName:"p"},"Catalogs.SafeQuery")," \u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"Catalogs.SafeBody"),", \u0438 \u043f\u0440\u0438 \u0432\u044b\u0437\u043e\u0432\u0435 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 ",(0,a.kt)("inlineCode",{parentName:"p"},"@This")," \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043a\u043b\u0430\u0441\u0441\u0430\n",(0,a.kt)("inlineCode",{parentName:"p"},"Catalogs"),", \u0430 \u043f\u0440\u0438 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0438 \u043a \u043c\u0435\u0442\u043e\u0434\u044b ",(0,a.kt)("inlineCode",{parentName:"p"},"FilterQuery")," \u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"FilterBody")," \u0432\u043e\u0437\u043d\u0438\u043a\u043d\u0443\u0442 \u043e\u0448\u0438\u0431\u043a\u0438, \u0442\u0430\u043a \u043a\u0430\u043a \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435\n\u043a\u043b\u0430\u0441\u0441\u0430 ",(0,a.kt)("inlineCode",{parentName:"p"},"Catalogs")," \u043d\u0435\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0434\u0430\u043d\u043d\u044b\u0445."),(0,a.kt)("p",null,"\u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0434\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u0434 \u0437\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u043b, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f ",(0,a.kt)("inlineCode",{parentName:"p"},"middleware"),"-\u0444\u0443\u043d\u043a\u0446\u0438\u0439 ",(0,a.kt)("inlineCode",{parentName:"p"},"Catalogs.SafeQuery"),"\n\u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"Catalogs.SafeBody")," \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Sticker()")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"class Catalogs {\n  model: Model;\n  where = {};\n  body = {};\n\n  @Sticker()\n  @Middleware()\n  static SafeQuery(@Query() query, @This() _this, @Next() next) {\n    _this.where = this.FilterQuery(_this.model, query);\n    return next();\n  }\n\n  @Sticker()\n  @Middleware()\n  static SafeBody(@Body() body, @This() _this, @Next() next) {\n    _this.body = this.FilterBody(_this.model, body);\n    return next();\n  }\n\n  // \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0448\u043b\u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0443\u044e \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u0432 \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\n  static FilterQuery(model, query) {\n    return model.safeQuery(query);\n  }\n\n  // \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0448\u043b\u0438 \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0443\u044e \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u0432 \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\n  static FilterBody(model, body) {\n    return model.safeBody(body);\n  }\n}\n")),(0,a.kt)("p",null,"\u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0434\u043b\u044f \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0445 \u044d\u0442\u0438\u043c \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u043e\u043c \u043c\u0435\u0442\u043e\u0434\u043e\u0432 \u0431\u0443\u0434\u0435\u0442 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430: \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043b\u0438\n",(0,a.kt)("inlineCode",{parentName:"p"},"route.constructor")," \u043f\u043e\u0442\u043e\u043c\u043a\u043e\u043c ",(0,a.kt)("inlineCode",{parentName:"p"},"cursor.constructor"),", \u0438 \u0435\u0441\u043b\u0438 \u0434\u0430, \u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 ",(0,a.kt)("inlineCode",{parentName:"p"},"cursor.constructor")," \u0432 \u044d\u0442\u043e\u043c\n\u043c\u0435\u0442\u043e\u0434\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u043e \u043d\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 ",(0,a.kt)("inlineCode",{parentName:"p"},"route.constructor"),' (\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u043a\u0430\u043a-\u0431\u044b "\u0437\u0430\u043a\u043b\u0435\u0435\u043d\u043e", \u043e\u0442\u0441\u044e\u0434\u0430 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\n\u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0430).'),(0,a.kt)("p",null,"\u0414\u0430\u043d\u043d\u0430\u044f \u043c\u0435\u0442\u043e\u0434\u0438\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f ",(0,a.kt)("inlineCode",{parentName:"p"},"middleware"),", \u0438 \u043f\u043e\u043a\u0430 \u043d\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f ",(0,a.kt)("inlineCode",{parentName:"p"},"endpoint"),". \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c,\n\u0447\u0442\u043e \u043d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0441\u0442 \u043d\u0430 \u0440\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u043a\u043b\u0430\u0441\u0441 \u0441 \u0442\u0438\u043f\u043e\u0432\u044b\u043c\u0438 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0430\u043c\u0438. \u0422\u0430\u043a\u0430\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u043f\u043e\u0437\u0436\u0435."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u0412\u0430\u0436\u043d\u043e"),": \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 ",(0,a.kt)("inlineCode",{parentName:"p"},"@Sticker")," \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439, \u0438 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0437\u043d\u0430\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0435\u0440\u0435\u0440\u0430\u0431\u043e\u0442\u0430\u043d\n\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d."),(0,a.kt)("h2",{id:"\u0446\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435-\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438"},"\u0426\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"aom")," \u043f\u043e\u0434\u0440\u0430\u0437\u0443\u043c\u0435\u0432\u0430\u0435\u0442 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043e\u0434\u043d\u0438\u0445 \u043a\u043b\u0430\u0441\u0441\u043e\u0432 \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u0434\u0440\u0443\u0433\u0438\u0445, \u0447\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0440\u043e\u0436\u0434\u0430\u0442\u044c \u0446\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u0435\n\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043c\u043e\u0434\u0443\u043b\u0435\u0439. \u041a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0430\u0436\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u044d\u0442\u043e \u0438\u043c\u0435\u0435\u0442 \u0432 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u043e\u0432 ",(0,a.kt)("inlineCode",{parentName:"p"},"StateMap")," \u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"This"),",\n\u0430 \u0442\u0430\u043a\u0436\u0435 ",(0,a.kt)("inlineCode",{parentName:"p"},"Bridge")," \u0438 ",(0,a.kt)("inlineCode",{parentName:"p"},"Use"),"."),(0,a.kt)("p",null,"\u0414\u043b\u044f \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u044d\u0442\u043e\u0439 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f ",(0,a.kt)("inlineCode",{parentName:"p"},"FwdRef"),"."),(0,a.kt)("p",null,"\u041f\u0440\u0438\u043c\u0435\u0440:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},'// ... users.ts\nimport { Query, This, Bridge, Get } from "aom";\nimport { User } from "./user";\n\n@Bridge(`/user_${User.id}`, User)\nclass Users {\n  model = getModelForClass(classes.Users); // \u0434\u043b\u044f \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u043e\u0433\u043e \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043c\u043e\u0434\u0435\u043b\u044c typegoose \u0432\u043e\u043a\u0440\u0443\u0433 \u043a\u043b\u0430\u0441\u0441\u0430 `classes.Users`\n\n  @Get()\n  static Index(@Query() query, @This() { model }: Users) {\n    return model.find({ ...query });\n  }\n}\n\n// ... user.ts\nimport { Query, This, Bridge, Get, FwdRef } from "aom";\n\n// \u0434\u043b\u044f eslint-\u0430 \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u043e\u0448\u0438\u0431\u043a\u0438 \u0446\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438\n// eslint-disable-next-line import/no-cycle\nimport { Users } from "./users";\n\n@Use(User.Init)\nclass User {\n  // \u0432\u043c\u0435\u0441\u0442\u043e \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0442\u044c \u0434\u043b\u044f \u0443\u0437\u043b\u0430 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043c\u043e\u0434\u0435\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\n  // \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0435\u0433\u043e \u0438\u0437 \u043a\u043b\u0430\u0441\u0441\u0430 `Users`\n  @Get()\n  static Index(@Query() query, @This(FwdRef(() => Users)) { model }: Users) {\n    return model.find({ ...query });\n  }\n}\n')),(0,a.kt)("p",null,"\u0415\u0441\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u043e ",(0,a.kt)("inlineCode",{parentName:"p"},"@This(Users)"),", \u0442\u043e \u0432 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0445 \u043a \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0443 \u0431\u0443\u0434\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 ",(0,a.kt)("inlineCode",{parentName:"p"},"undefined"),",\n\u0447\u0442\u043e \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044e \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u043a\u043b\u0430\u0441\u0441\u0430 ",(0,a.kt)("inlineCode",{parentName:"p"},"User"),", \u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 ",(0,a.kt)("inlineCode",{parentName:"p"},"model")," \u0431\u0443\u0434\u0435\u0442 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e."),(0,a.kt)("p",null,"\u0414\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u044f ",(0,a.kt)("inlineCode",{parentName:"p"},"FwdRef")," \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@Use(FwdRef(()=>Node.Middleware))")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@Bridge('/path', FwdRef(()=>NextNode))")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"@StateMap(FwdRef(()=>AnotherNode)"))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u0412\u0430\u0436\u043d\u043e"),": \u043d\u0430\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c ",(0,a.kt)("inlineCode",{parentName:"p"},"eslint")," \u0441 ",(0,a.kt)("strong",{parentName:"p"},"\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u043c")," \u043f\u0440\u0430\u0432\u0438\u043b\u043e\u043c ",(0,a.kt)("inlineCode",{parentName:"p"},"import/no-cycle"),",\n\u0447\u0442\u043e\u0431\u044b \u0434\u0435\u0442\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438 \u0441 \u0446\u0438\u043a\u043b\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0441\u0441\u044b\u043b\u043a\u0430\u043c\u0438 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c ",(0,a.kt)("inlineCode",{parentName:"p"},"FwdRef")))}m.isMDXComponent=!0}}]);